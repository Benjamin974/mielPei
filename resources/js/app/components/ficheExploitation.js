import { apiService } from "../_services/apiService";
import cardProducteur from "./cardProducteur";

export default {
  props: {
    exploiTation: {
      default: function () {
        return {}
      }
    }
  },
  data() {
    return {
      sheet: false,
      products: [],

      itemsPerPageArray: [4, 8, 12],
      sortDesc: false,
      page: 1,
      itemsPerPage: 2,
      sortBy: 'name',
      keys: [
        'name',
        'image',
        'prix',
        'quantite',
      ],
    
    }
  },

  computed: {
    numberOfPages () {
      return Math.ceil(this.products.length / this.itemsPerPage)
    },
  },

    methods: {
      nextPage () {
        if (this.page + 1 <= this.numberOfPages) this.page += 1
      },
      formerPage () {
        if (this.page - 1 >= 1) this.page -= 1
      },
      updateItemsPerPage (number) {
        this.itemsPerPage = number
      },
      
      getProducts(id) {
        this.products = []
        apiService.get('/api/producteurs/products/' + id).then(({ data }) => {
          data.producteurs_has_products.forEach(product => {
            this.products.push(product);
          });
        })
      }
    }
  }